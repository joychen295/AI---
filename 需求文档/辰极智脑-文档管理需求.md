# 辰极智脑 文档管理需求

## 一、修订记录

| 修订日期 | 修订内容                 | 修订人员 |
| -------- | ------------------------ | -------- |
| 12.03    | 辰极智脑增加文档管理功能 | 陈文静   |

---

## 二、需求背景与目标

在企业知识管理和AI应用场景下，需要一个统一的文档管理平台来支撑知识库的构建与维护。文档管理功能作为辰极智脑的基础能力，为后续的AI问答、知识检索等功能提供数据支撑。

**用户**：通过文档管理功能，可以上传、管理、分类企业文档，并将文档处理后构建知识库，实现智能检索和问答。

---

## 三、业务流程

```
用户上传文档 → 文档存储至OSS → 触发知识库构建 → 文档分块处理 → 向量化存储 → 可用于查询
```

---

## 四、功能性需求

### 4.1 文档列表

#### 原型图

（请插入原型图）

#### 业务说明

1. 用户进入文档管理页面，展示文档列表；
2. 页面顶部展示统计卡片，包含：总文档数、处理中、总存储量、今日上传；
3. 支持按文件名搜索、分类筛选、状态筛选、文件类型筛选、日期范围筛选；
4. 高级筛选支持：标签多选、文件大小范围；
5. 列表支持分页展示，每页默认50条；
6. 支持多选文件进行批量操作；

#### 界面字段说明

| 字段名   | 字段类型 | 字段长度 | 是否必填 | 展示及校验规则                                         |
| -------- | -------- | -------- | -------- | ------------------------------------------------------ |
| 文件名   | String   | 255字符  | 是       | 展示原始文件名，带文件类型图标                         |
| 文件大小 | Number   | /        | 是       | 格式化展示（KB/MB/GB）                                 |
| 状态     | 枚举值   | /        | 是       | uploading/uploaded/processing/processed/failed/deleted |
| 分类     | String   | /        | 否       | 展示文档所属分类                                       |
| 上传时间 | DateTime | /        | 是       | 格式：YYYY-MM-DD HH:mm:ss                              |

#### 界面操作说明

| 操作名称 | 操作说明                                                       |
| -------- | -------------------------------------------------------------- |
| 搜索     | 输入关键词，按文件名模糊搜索                                   |
| 分类筛选 | 下拉选择分类：技术文档、设计文档、需求文档、测试文档、用户手册 |
| 状态筛选 | 下拉选择状态                                                   |
| 高级筛选 | 点击展开，显示标签多选和文件大小范围筛选                       |
| 查看     | 点击打开文档详情侧边栏                                         |
| 下载     | 点击下载当前文件                                               |
| 删除     | 点击弹出确认框，确认后删除文件                                 |
| 全选     | 勾选表头复选框，选中当前页所有文件                             |

---

### 4.2 文档上传

#### 原型图

（请插入原型图）

#### 业务说明

1. 点击【上传文档】按钮，弹出上传对话框；
2. 支持拖拽上传和点击上传两种方式；
3. 支持多文件同时上传；
4. 上传过程中实时显示上传进度（百分比）；
5. 支持配置：文档分类选择、标签添加；
6. 上传成功后自动刷新文件列表；

#### 界面字段说明

| 字段名   | 字段类型 | 字段长度 | 是否必填 | 展示及校验规则                                                                                     |
| -------- | -------- | -------- | -------- | -------------------------------------------------------------------------------------------------- |
| 上传文件 | File     | 100MB    | 是       | 支持格式：pdf、txt、md、doc、docx、ppt、pptx、xls、xlsx、html、csv、json、xml、png、jpg、jpeg、gif |
| 分类     | 枚举值   | /        | 否       | 下拉选择文档分类                                                                                   |
| 标签     | String[] | /        | 否       | 多选标签，支持创建新标签                                                                           |

#### 界面操作说明

| 操作名称 | 操作说明                     |
| -------- | ---------------------------- |
| 拖拽上传 | 将文件拖拽至上传区域         |
| 点击上传 | 点击上传区域，弹出文件选择框 |
| 选择分类 | 下拉选择文档分类             |
| 添加标签 | 多选已有标签或输入创建新标签 |
| 取消     | 关闭上传对话框               |
| 确认上传 | 开始上传选中的文件           |

---

### 4.3 文档详情

#### 原型图

（请插入原型图）

#### 业务说明

1. 点击文件名或查看按钮，右侧滑出文档详情侧边栏；
2. 展示文件基本信息：ID、显示名称、大小、类型、状态；
3. 展示并支持编辑：分类、标签、描述；
4. 展示时间戳：创建时间、上传时间、处理时间；
5. 展示元数据：MIME类型、扩展名、校验和（MD5/SHA256）；
6. 展示OSS信息：存储桶、对象键、ETag；

#### 界面字段说明

| 字段名   | 字段类型 | 字段长度 | 是否必填 | 展示及校验规则   |
| -------- | -------- | -------- | -------- | ---------------- |
| 文件ID   | String   | /        | 是       | 只读展示         |
| 显示名称 | String   | 255字符  | 是       | 只读展示         |
| 文件大小 | Number   | /        | 是       | 格式化展示       |
| 文件类型 | String   | /        | 是       | 只读展示         |
| 状态     | 枚举值   | /        | 是       | Tag标签展示      |
| 分类     | 枚举值   | /        | 否       | 可编辑，下拉选择 |
| 标签     | String[] | /        | 否       | 可编辑，多选     |
| 描述     | String   | 500字符  | 否       | 可编辑，文本框   |

#### 界面操作说明

| 操作名称 | 操作说明                                 |
| -------- | ---------------------------------------- |
| 编辑     | 点击切换编辑模式，可修改分类、标签、描述 |
| 保存     | 保存修改后的信息                         |
| 下载     | 下载当前文件                             |
| 关闭     | 关闭详情侧边栏                           |

---

### 4.4 批量操作

#### 原型图

（请插入原型图）

#### 业务说明

1. 选中多个文件后，点击【批量操作】按钮，弹出批量操作对话框；
2. 支持四种批量操作：批量删除、批量分类、批量标签、批量下载；
3. 批量删除为危险操作，需要二次确认；
4. 批量标签支持三种动作：添加、移除、替换；
5. 批量下载支持选择压缩格式（zip/tar）和命名规则；
6. 单次批量操作最多支持100个文件；

#### 界面字段说明

| 字段名   | 字段类型 | 字段长度 | 是否必填 | 展示及校验规则                |
| -------- | -------- | -------- | -------- | ----------------------------- |
| 操作类型 | 枚举值   | /        | 是       | delete/category/tags/download |
| 目标分类 | 枚举值   | /        | 条件必填 | 批量分类时必填                |
| 标签动作 | 枚举值   | /        | 条件必填 | add/remove/replace            |
| 目标标签 | String[] | /        | 条件必填 | 批量标签时必填                |
| 压缩格式 | 枚举值   | /        | 条件必填 | zip/tar                       |
| 命名规则 | 枚举值   | /        | 条件必填 | original/timestamp/sequential |

#### 界面操作说明

| 操作名称 | 操作说明                                                                             |
| -------- | ------------------------------------------------------------------------------------ |
| 批量删除 | 1. 选择删除操作；2. 展示危险操作警告；3. 确认后永久删除所选文件                      |
| 批量分类 | 1. 选择分类操作；2. 下拉选择目标分类；3. 确认后为所选文件设置分类                    |
| 批量标签 | 1. 选择标签操作；2. 选择动作：添加/移除/替换；3. 多选目标标签；4. 确认后执行标签操作 |
| 批量下载 | 1. 选择下载操作；2. 选择压缩格式和命名规则；3. 确认后打包下载                        |
| 取消     | 关闭批量操作对话框                                                                   |
| 确认     | 执行批量操作                                                                         |

---

### 4.5 标签管理

#### 原型图

（请插入原型图）

#### 业务说明

1. 点击【标签管理】按钮，弹出标签管理对话框；
2. 展示所有已有标签列表；
3. 支持创建新标签、编辑标签名称、删除标签；
4. 预设标签：重要、紧急、待审核、已审核、草稿、已发布；

#### 界面字段说明

| 字段名   | 字段类型 | 字段长度 | 是否必填 | 展示及校验规则 |
| -------- | -------- | -------- | -------- | -------------- |
| 标签名称 | String   | 20字符   | 是       | 不可重复       |

#### 界面操作说明

| 操作名称 | 操作说明                         |
| -------- | -------------------------------- |
| 新建标签 | 输入标签名称，创建新标签         |
| 编辑标签 | 点击编辑图标，修改标签名称       |
| 删除标签 | 点击删除图标，删除标签（需确认） |
| 关闭     | 关闭标签管理对话框               |

---

## 五、非功能性需求

### 文件限制

| 限制项           | 限制值               |
| ---------------- | -------------------- |
| 单文件大小限制   | 100 MB               |
| 单次批量操作最多 | 100个文件            |
| 文件名长度限制   | 255字节（UTF-8编码） |
| 上传超时时间     | 60秒                 |

### 支持的文件格式

| 类型   | 格式                                                                     |
| ------ | ------------------------------------------------------------------------ |
| 文档类 | pdf、txt、md、doc、docx、ppt、pptx、xls、xlsx、html、htm、csv、json、xml |
| 图片类 | png、jpg、jpeg、gif、bmp、tif、tiff、webp                                |

### 错误提示

| 错误场景         | 提示内容                                    |
| ---------------- | ------------------------------------------- |
| 文件不存在       | 文件不存在或已被删除，请刷新页面            |
| 文件过大         | 文件大小超过限制（最大100MB），请压缩后重试 |
| 不支持的文件类型 | 不支持该文件格式，请上传支持的格式          |
| 批量操作超限     | 单次批量操作最多支持100个文件               |
| 删除失败         | 文件删除失败，请稍后重试                    |
