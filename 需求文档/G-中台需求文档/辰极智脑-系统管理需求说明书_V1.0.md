# 辰极智脑 - 系统管理需求说明书

## 一、修订记录

| 修订日期   | 修订内容                         | 修订人员 | 审核人员 |
| :--------- | :------------------------------- | :------- | :------- |
| 2025-12-11 | 辰极智脑系统管理功能初稿         | 待定     | 待定     |

---

## 二、需求背景与目标

### 2.1 编写目的

本文档旨在明确“辰极智脑”系统中“系统管理”模块的功能需求。该模块作为系统管理员的核心控制台，负责全局配置管理、资源监控、性能调优及维护操作，是保障系统稳定运行的基石。

### 2.2 产品背景

“辰极智脑”是一个复杂的 AI 中台系统，包含 RAG 引擎、知识库、LLM 接入等多个子系统。为了降低运维复杂度，系统提供了一个统一的 administrative 界面，实现：

1. **集中管控**：一站式管理系统参数、摇光（Yaoguang）组件配置及资源配额。
2. **可观测性**：实时监控异步任务状态、系统健康度及关键性能指标。
3. **主动维护**：提供性能基准测试、知识库清空重建等高级维护工具。

此模块对应的代码实现主要位于前端 `AdminView.vue` 及其引用的子组件。

---

## 三、用户角色与权限

| 角色           | 职责描述                                     | 权限范围                                           |
| :------------- | :------------------------------------------- | :------------------------------------------------- |
| **平台管理员** | 负责系统底层的稳定性和全局配置。             | **完全权限**。拥有所有配置的修改权及破坏性操作权限。 |
| **企业管理员** | 负责本企业业务的运行情况。                   | **无权限/受限访问**。通常不可见此页面。            |

---

## 四、功能架构

系统管理模块采用模块化卡片布局，主要包含以下功能区块：

1. **概览仪表盘 (Header Stats)**：系统运行时长、总事件数等宏观指标。
2. **系统配置 (System Config)**：基础参数设置。
3. **任务监控 (Task Monitor)**：后台异步任务的实时追踪与干预。
4. **资源配置 (Resource Config)**：RAG 引擎参数及摇光（Yaoguang）组件配置。
5. **性能配置 (Performance Config)**：性能 Profile 切换与基准测试。
6. **统计与监控 (Stats & Monitor)**：详细的图表化监控数据。

---

## 五、功能性需求

### 5.1 系统概览

#### 对应组件

`AdminHeader.vue`

#### 功能描述

在页面顶部展示系统关键状态摘要：

* **运行时长 (Uptime)**：系统自上次启动以来的持续运行时间（格式化显示）。
* **总事件数 (Total Events)**：系统处理的累计请求/事件数量。
* **活跃任务数**：当前正在执行的后台任务数量。
* **资源状态**：CPU/Memory 的简要负载指示（红/绿状态灯）。

### 5.2 系统配置

#### 对应组件

`SystemConfigCard.vue`

#### 功能描述

提供系统级全局参数的查看与修改。

* **配置项**：
  * **日志级别**：Debug / Info / Warning / Error。
  * **缓存策略**：Redis 缓存过期时间、最大条目数。
  * **请求限制**：全局 QPS 阈值。
* **操作**：
  * **保存**：提交修改至后端，需支持热更新。
  * **重置**：恢复至出厂默认配置。

### 5.3 任务监控

#### 对应组件

`TaskMonitorCard.vue`

#### 功能描述

实时追踪系统中运行的异步任务（如知识库构建、批量解析等）。

* **任务列表**：展示任务 ID、类型（Type）、状态（Pending/Running/Completed/Failed）、进度条。
* **干预操作**：
  * **刷新**：手动同步最新任务列表。
  * **取消**：强行终止正在运行的任务。
  * **重试**：对失败的任务发起重试。
  * **清除已完成**：一键移除所有 Completed/Failed 状态的历史记录。

### 5.4 资源与摇光配置

#### 对应组件

`ResourceConfigCard.vue`

#### 功能描述

管理底层计算资源及“摇光”组件的连接参数。

* **资源锁定**：提供 `Config Locked` 开关，防止误操作修改关键参数。
* **RAG 参数**：Top_K、Chunk Size、Overlap 等知识库基础参数。
* **摇光 (Yaoguang) 配置**：
  * **预设管理**：选择不同的预设方案（如 "High Performance", "Cost Saving"）。
  * **连接参数**：摇光服务的 Endpoint、API Key（自动脱敏）。
* **知识库维护**：
  * **状态统计**：展示当前向量总数、文档总数。
  * **清空知识库**：高危操作按钮。
    * **交互**：点击后必须弹出红色警示框，需用户二次确认（Confirm Dialog）后调用后端 `clearKnowledgeBase` 接口。

### 5.5 性能配置与测试

#### 对应组件

`PerformanceConfigCard.vue`

#### 功能描述

* **Profile 管理**：
  * **预置模式**：快速切换系统运行模式（如 "Balanced", "Throughput First", "Latency First"）。
  * **自定义模式**：支持新建、编辑、删除自定义的参数组合。
* **基准测试 (Benchmark)**：
  * **功能**：即时发起一轮性能测试，评估当前配置下的系统表现。
  * **参数**：并发数、测试时长。
  * **结果**：测试完成后展示 QPS、平均延迟、P99 延迟等指标。

### 5.6 统计与性能监控

#### 对应组件

`StatisticsCard.vue`, `PerformanceMonitorCard.vue`, `StorageMaintenanceCard.vue`

#### 功能描述

* **业务统计**：各租户的请求量分布、各模型的使用占比。
* **性能图表**：使用折线图展示近 1 小时的 QPS 趋势、响应时间波动。
* **存储维护**：展示磁盘使用率、MinIO/VikingDB 的存储配额，提供过期文件清理工具。

---

## 六、非功能性需求

### 6.1 响应性

* **加载状态**：各卡片数据加载时需展示骨架屏 (Skeleton) 或 Loading Spinner。
* **实时性**：任务列表和监控图表应支持自动刷新（或通过 SSE 推送），延迟不超过 5 秒。

### 6.2 健壮性

* **异常处理**：任何配置保存失败（如后端校验不通过）均需弹出明确的 Error Toast，禁止静默失败。
* **防误触**：所有破坏性操作（删除任务、清空库、重置配置）必须有二次确认机制。
