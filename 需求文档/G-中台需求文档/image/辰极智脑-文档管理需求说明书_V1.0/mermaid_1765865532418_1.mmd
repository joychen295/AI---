graph LR
    A[用户上传文档] --> B{格式校验}
    B -- 不通过 --> C[提示错误]
    B -- 通过 --> D[上传至OSS]
    D --> E[创建文档记录]
    E --> F[触发异步解析任务]
    F --> G[文档分块 & 向量化]
    G --> H[写入向量数据库]
    H --> I[更新状态: 已处理]
    G -- 失败 --> J[更新状态: 失败]